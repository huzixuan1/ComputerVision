### SLAM算法精度评估


https://zhuanlan.zhihu.com/p/526357389


### IMU涉及加速度、角速度

https://zhuanlan.zhihu.com/p/147198921



### SLAM 完整流程：
	1. Input Data:
		单目数据 (Monocular): 使用单目相机获取图像，配合IMU等传感器数据。

		双目数据 (Stereo): 双目相机通过视差计算直接获得深度信息。

		RGB-D 数据: RGB图像和深度图的结合，提供颜色信息和深度数据。

		IMU 数据 (Inertial Measurement Unit): 陀螺仪和加速度计数据，用于提供更精准的位姿估计，特别是在动态场景和低纹理区域中。

	2. VIO Frontend (视觉惯性里程计前端)：
		主要负责特征提取、特征匹配和粗略的位姿估计。

	2.1 特征提取：

		ORB (Oriented FAST and Rotated BRIEF):

			构建金字塔：通过多层金字塔对图像进行不同尺度的处理，便于从不同分辨率提取特征。

		特征点提取：

			FAST角点检测：检测图像中的显著角点特征。

			Harris响应值筛选：增强图像中最具信息量的特征点，降低背景噪声。

	2.2 特征描述：

	计算方向：

		灰度质心法：通过计算质心位置来估算关键点的方向，克服图像旋转带来的影响。

	计算描述子：

		Steered BRIEF：通过旋转矩阵调整特征点描述子，确保描述子方向一致性，从而提高匹配精度。

	2.3 关键点筛选：

		极大抑制：减少冗余特征点，只保留显著的关键点。

		特征均匀化：通过均匀化方法优化特征点在图像中的分布，提高系统鲁棒性。

	2.4 特征匹配：

		快速匹配：利用FLANN等快速匹配算法进行特征点的初步匹配。

		投影匹配：在拥有深度信息的情况下，使用投影变换来加速匹配过程。

	2.5 位姿估计：

		PnP (Perspective-n-Point)：通过图像和3D地图点的对应关系估算相机位姿。
			单目相机：

			本质矩阵（Essential Matrix）：用于通过两幅图像的匹配来估算相机的相对姿态，假设已知相机的内参。

			基础矩阵（Fundamental Matrix）：用于描述两幅图像间的几何关系，并可用于估算位姿，但不依赖于相机内参。

			单应矩阵（Homography）：适用于平面场景下的位姿估计，通常用于相机平移较小或者拍摄平面物体时。

			双目相机：双目相机通过两个视角获取深度信息，位姿估计常常基于视差和三角化来计算相机位姿，直接利用双目图像中的深度信息进行3D重建，从而推算出相机的位姿。

		优化：如基于图像匹配的姿态优化方法来细化位姿估计，常见方法有图优化和局部优化。

	2.6 输出：提供当前帧的位姿估计、特征匹配结果及其他相关信息。
	

	3. VIO Backend (视觉惯性里程计后端)：
		后端优化，精细化调整位姿估计，构建全局地图。

		图优化：包括 BA优化（束束调整）和 g2o优化，优化全局轨迹，减小误差。

		IMU与图优化结合：IMU数据与视觉数据结合，进行联合优化，以提高精度。

	4. Loop Closure (回环检测)：
		词袋模型 (Bag of Words)：通过描述子与已知地图特征的比对来识别相机是否已经回到了之前的地点。

		回环检测：如果检测到回环，通过回环检测的结果进行全局优化，改进地图的一致性。

		回环优化：通过Pose-graph优化或全局BA来减少误差，增强地图精度。

	5. Mapping (地图构建)：
		局部地图初始化：开始时，仅利用当前可视区域内的特征点进行局部地图初始化。

		全局地图优化：随着SLAM系统的推进，逐步进行全局优化，构建大范围的地图。

		地图点融合与更新：根据新加入的关键帧，持续优化现有地图中的特征点，更新地图。

		地图点的多视角融合：不同视角下的地图点可能会融合成同一个点，需要进行数据融合，以提升地图质量。

	6. 系统管理：
		关键帧管理：关键帧被插入到系统中进行地图构建。在回环检测发生时，关键帧被用来进行全局优化。

		关键帧插入条件：关键帧插入通常基于位姿变化、重定位误差等条件，确保关键帧反映了相机运动的显著变化。
